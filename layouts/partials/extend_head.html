<script>
  // Sync theme class with stored preference (do not force).
  try {
    const pref = localStorage.getItem('pref-theme');
    const isDark = pref === 'dark' || (!pref && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches);
    document.documentElement.classList.toggle('dark', isDark);
    if (document.body) document.body.classList.toggle('dark', isDark);
  } catch (e) {}
</script>
